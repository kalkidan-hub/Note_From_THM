Structured data store of objects
objects..
- users
- computers
- groups
- other objects(printer, shares, GPO(Group Policy Object))
- global catalog
================================

- What Active Directory is
- What an Active Directory Domain is
- What components go into an Active Directory Domain
- Forests and Domain Trust

### Windows Domain
- is a group of users and computers under the administration of a given business. 
- the administration of common components is centralized in a single repository ==Active Directory (AD)== 
- The server that runs the Active directory is known as ==Domain Controller==   

![[Pasted image 20240414103803.png]]

_Why we are so concerned with this Windows domain thing,_
- coz it has these main advantages, 
	  - centralized Identity management
	  - managing security policies

### Active Directory Domain Service
- a catalog that holds the information of all the `objects` that exists in your network
objects..
- users - know as ==Security Principal==, meaning they can be authenticated by the domain and can be assigned privileges over resources
	- people
	- services - used by software applications, servers and system services to run specific tasks or processes. A service that runs on a server typically requires a dedicated service account to authenticate and access resources
- computers - these objects also considered as ==Security Principals== 
  Name schema of these objects is computer's name followed by `$` sign, ex. `DC01$`
- groups - can have other objects as members, be it users, machine or other groups
  
- other objects(printer, shares, GPO(Group Policy Object))
#### OU (Organizational Unit)
- is a container within an AD, it resembles a disjoint set as two OUs don't contain same object
- OUs provide a way to structure and administer network resources in a hierarchical manner, enabling administrators to apply policies, delegate administrative authority, and manage resources more effectively.

Here are some key points about Organizational Units:

1. **Hierarchy**: OUs can be nested within each other to create a hierarchical structure that reflects the organization's administrative model. For example, an organization might have OUs for different departments, teams, geographic locations, or types of resources.
    
2. **Administrative Boundaries**: OUs serve as administrative boundaries within an AD domain. Administrators can delegate administrative authority for specific OUs to other users or groups, allowing them to manage resources within those OUs without granting full domain-wide administrative privileges.
    
3. **Group Policy Application**: Group Policy Objects (`GPOs`) can be linked to OUs to apply configuration settings, security policies, and other configurations to the objects contained within the OU. This allows administrators to apply different policies to different parts of the organization based on their requirements.
    
4. **Resource Management**: OUs are commonly used to organize and manage users, groups, and computers within an AD domain. For example, users and computers can be placed into departmental OUs to simplify management and apply policies specific to each department.
    
5. **Scalability**: OUs provide a scalable way to organize and manage resources within an AD domain. As organizations grow and evolve, administrators can create new OUs and reorganize existing ones to accommodate changes in the organizational structure or IT requirements.
    
6. **Naming**: OUs are typically named based on the organizational structure or function they represent. For example, an organization might have OUs named "Sales," "Marketing," "Engineering," etc., to represent different departments or teams.

### User management
#### Delegation
- the process of giving a specific  a `user` control over some OUs
### Authentication Methods
Two protocols used for network authentication, 
- `Kerberos` - the recent one
- `NetNTLM` - legacy one

#### `Kerberos`  Authentication
The process ...
1. the user sends their username and timestamp encrypted with their key to `key distribution center KDC` 
   `KDC` create and send back a `Ticket Granting Ticker (TGT)` along with `session key`, which allow the user to request additional tickets to access specific service
   

![[Pasted image 20240414122332.png]]

2. when a user wants to connect to a service on the network, they will use their `TGT` to ask the `KDC` for `Ticket Granting Service (TGS)`, these tickets are that allow connection only to a specific service they were created for. To do so a user sends their username and timestamp encrypted by the `session key` received before along with `TGT` and a `service principal name(SPN)`, which indicates the service and server name the user intends to use
   
   `KDC` will send a user `TGS`, encrypted with a key derived from the `Service Owner Hash`, with a `Service Session Key`, which the user will need to authenticate to the service they want to access.
   ![[Pasted image 20240414123550.png]]
   3. `TGS` can then be sent to the desired service to authenticate and establish a connection. The service use its configured account's password hash to `decrypt` the `TGS` and validate the `Service Session Key`

#### NetNTLM Authentication
- works using a challenge-response mechanism
Here's the process...
1. The client sends an authentication request to the server they want to access.
2. The server generates a random number and sends it as a challenge to the client.
3. The client combines their `NTLM` password hash with the challenge (and other known data) to generate a response to the challenge and sends it back to the server for verification.
4. The server forwards the challenge and the response to the Domain Controller for verification.
5. The domain controller uses the challenge to recalculate the response and compares it to the original response sent by the client. If they both match, the client is authenticated; otherwise, access is denied. The authentication result is sent back to the server.
6. The server forwards the authentication result to the client.

![[Pasted image 20240414124549.png]]

### Trees, Forests and Trust
